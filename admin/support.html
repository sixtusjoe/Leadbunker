<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Support Tickets - Admin - Leadbunker</title>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="../css/dashboard.css">
    <link rel="stylesheet" href="css/admin-styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <!-- Mobile Header -->
    <div class="mobile-header">
        <button class="mobile-menu-btn" id="mobileMenuBtn">
            <i class="fas fa-bars"></i>
        </button>
        <h1 class="mobile-page-title">Support Tickets</h1>
        <a href="#" class="mobile-profile-link">
            <img src="https://ui-avatars.com/api/?name=Admin&background=667eea&color=fff" alt="Admin" class="mobile-profile-img">
        </a>
    </div>

    <!-- Sidebar Overlay -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Dashboard Container -->
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="index.html" class="logo">
                    <div class="logo-icon">LB</div>
                    <span>Admin Panel</span>
                </a>
            </div>

            <nav class="sidebar-nav">
                <ul>
                    <li><a href="index.html"><i class="fas fa-home"></i> Dashboard</a></li>
                    <li><a href="users.html"><i class="fas fa-users"></i> Users</a></li>
                    <li><a href="transactions.html"><i class="fas fa-credit-card"></i> Transactions</a></li>
                    <li><a href="coupons.html"><i class="fas fa-ticket-alt"></i> Coupons</a></li>
                    <li class="active"><a href="support.html"><i class="fas fa-headset"></i> Support <span class="badge">12</span></a></li>
                    <li><a href="scraping.html"><i class="fas fa-spider"></i> Scraping Jobs</a></li>
                    <li><a href="email-validator.html"><i class="fas fa-envelope-open-text"></i> Email Validator</a></li>
                    <li><a href="wallets.html"><i class="fas fa-wallet"></i> Payment Wallets</a></li>
                    <li><a href="crypto-payments.html"><i class="fab fa-bitcoin"></i> Crypto Payments</a></li>
                    <li><a href="analytics.html"><i class="fas fa-chart-line"></i> Analytics</a></li>
                    <li><a href="settings.html"><i class="fas fa-cog"></i> Settings</a></li>
                </ul>
            </nav>

            <div class="sidebar-footer">
                <ul>
                    <li><a href="../dashboard.html"><i class="fas fa-arrow-left"></i> User Dashboard</a></li>
                    <li><a href="../index.html"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                </ul>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Header -->
            <div class="main-header">
                <div>
                    <h1>Support Tickets</h1>
                    <p style="color: var(--text-light); margin: 0; font-size: 14px;">Manage customer support requests</p>
                </div>
            </div>

            <!-- Stats Overview -->
            <div class="stats-cards">
                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">
                        <i class="fas fa-exclamation-circle"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">12</div>
                        <div class="stat-label">Open Tickets</div>
                        <div class="card-change negative"><i class="fas fa-exclamation-circle"></i> Needs attention</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);">
                        <i class="fas fa-clock"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">8</div>
                        <div class="stat-label">In Progress</div>
                    </div>
                </div>

                <div class="stat-card">
                    <div class="stat-icon" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
                        <i class="fas fa-check-circle"></i>
                    </div>
                    <div class="stat-content">
                        <div class="stat-value">143</div>
                        <div class="stat-label">Resolved (This Month)</div>
                        <div class="card-change positive"><i class="fas fa-arrow-up"></i> 92% satisfaction</div>
                    </div>
                </div>
            </div>

            <!-- Filters -->
            <div class="card">
                <div class="filter-bar">
                    <div class="filter-group">
                        <input type="text" class="form-input search-input" placeholder="Search tickets by ID, user, or subject...">
                        <select class="form-select">
                            <option value="">All Status</option>
                            <option value="open">Open</option>
                            <option value="in-progress">In Progress</option>
                            <option value="resolved">Resolved</option>
                            <option value="closed">Closed</option>
                        </select>
                        <select class="form-select">
                            <option value="">All Priorities</option>
                            <option value="urgent">Urgent</option>
                            <option value="high">High</option>
                            <option value="medium">Medium</option>
                            <option value="low">Low</option>
                        </select>
                        <select class="form-select">
                            <option value="">All Categories</option>
                            <option value="technical">Technical Issue</option>
                            <option value="billing">Billing</option>
                            <option value="feature">Feature Request</option>
                            <option value="account">Account</option>
                        </select>
                        <button class="btn btn-secondary">
                            <i class="fas fa-filter"></i> Filter
                        </button>
                    </div>
                </div>
            </div>

            <!-- Support Tickets List -->
            <div style="display: grid; gap: 16px;">
                <!-- Urgent Ticket -->
                <div class="card" style="border-left: 4px solid #ef4444;">
                    <div style="display: flex; justify-content: space-between; align-items: start; gap: 16px;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                                <span class="badge badge-danger">Urgent</span>
                                <span class="badge badge-warning">Open</span>
                                <code style="font-size: 12px; color: var(--text-light);">#TICK-1847</code>
                            </div>
                            <h3 style="margin: 0 0 8px 0; font-size: 16px;">
                                <i class="fas fa-exclamation-triangle" style="color: #ef4444;"></i>
                                Cannot access my account - payment issues
                            </h3>
                            <div style="display: flex; align-items: center; gap: 16px; color: var(--text-light); font-size: 13px; margin-bottom: 12px;">
                                <div style="display: flex; align-items: center; gap: 6px;">
                                    <img src="https://ui-avatars.com/api/?name=John+Doe&background=667eea&color=fff&size=24" style="width: 24px; height: 24px; border-radius: 50%;" alt="User">
                                    <strong style="color: var(--text-dark);">John Doe</strong>
                                </div>
                                <span><i class="fas fa-envelope"></i> john@example.com</span>
                                <span><i class="fas fa-clock"></i> 2 hours ago</span>
                                <span><i class="fas fa-tag"></i> Billing</span>
                            </div>
                            <p style="margin: 0; color: var(--text-medium); font-size: 14px; line-height: 1.5;">
                                "My payment was processed but I still can't access premium features. I've tried logging out and back in but the issue persists. This is urgent as I need to complete a client project..."
                            </p>
                        </div>
                        <div style="display: flex; gap: 8px; flex-shrink: 0;">
                            <button class="btn btn-primary" onclick="viewTicket('1847')">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="btn" style="background: #10b981; color: white;" onclick="resolveTicket('1847')">
                                <i class="fas fa-check"></i> Resolve
                            </button>
                        </div>
                    </div>
                </div>

                <!-- High Priority Ticket -->
                <div class="card" style="border-left: 4px solid #f59e0b;">
                    <div style="display: flex; justify-content: space-between; align-items: start; gap: 16px;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                                <span class="badge" style="background: #fef3c7; color: #d97706;">High</span>
                                <span class="badge badge-info">In Progress</span>
                                <code style="font-size: 12px; color: var(--text-light);">#TICK-1846</code>
                            </div>
                            <h3 style="margin: 0 0 8px 0; font-size: 16px;">
                                <i class="fas fa-bug" style="color: #f59e0b;"></i>
                                Email extraction returning empty results
                            </h3>
                            <div style="display: flex; align-items: center; gap: 16px; color: var(--text-light); font-size: 13px; margin-bottom: 12px;">
                                <div style="display: flex; align-items: center; gap: 6px;">
                                    <img src="https://ui-avatars.com/api/?name=Sarah+Smith&background=f093fb&color=fff&size=24" style="width: 24px; height: 24px; border-radius: 50%;" alt="User">
                                    <strong style="color: var(--text-dark);">Sarah Smith</strong>
                                </div>
                                <span><i class="fas fa-envelope"></i> sarah@company.com</span>
                                <span><i class="fas fa-clock"></i> 5 hours ago</span>
                                <span><i class="fas fa-tag"></i> Technical</span>
                            </div>
                            <p style="margin: 0; color: var(--text-medium); font-size: 14px; line-height: 1.5;">
                                "I've tried extracting emails from multiple domains but keep getting empty CSV files. Used 500 credits with no results. Please help!"
                            </p>
                            <div style="margin-top: 12px; padding: 12px; background: #dbeafe; border-radius: 8px; font-size: 13px;">
                                <strong style="color: #1e40af;">Admin Note:</strong> <span style="color: #1e3a8a;">Investigating - appears to be related to recent API update. ETA: 2 hours</span>
                            </div>
                        </div>
                        <div style="display: flex; gap: 8px; flex-shrink: 0;">
                            <button class="btn btn-primary" onclick="viewTicket('1846')">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="btn btn-secondary" onclick="addNote('1846')">
                                <i class="fas fa-comment"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Medium Priority Ticket -->
                <div class="card" style="border-left: 4px solid #667eea;">
                    <div style="display: flex; justify-content: space-between; align-items: start; gap: 16px;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                                <span class="badge badge-info">Medium</span>
                                <span class="badge badge-warning">Open</span>
                                <code style="font-size: 12px; color: var(--text-light);">#TICK-1845</code>
                            </div>
                            <h3 style="margin: 0 0 8px 0; font-size: 16px;">
                                <i class="fas fa-lightbulb" style="color: #667eea;"></i>
                                Feature request: Bulk email validation
                            </h3>
                            <div style="display: flex; align-items: center; gap: 16px; color: var(--text-light); font-size: 13px; margin-bottom: 12px;">
                                <div style="display: flex; align-items: center; gap: 6px;">
                                    <img src="https://ui-avatars.com/api/?name=Mike+Johnson&background=4facfe&color=fff&size=24" style="width: 24px; height: 24px; border-radius: 50%;" alt="User">
                                    <strong style="color: var(--text-dark);">Mike Johnson</strong>
                                </div>
                                <span><i class="fas fa-envelope"></i> mike@startup.io</span>
                                <span><i class="fas fa-clock"></i> 1 day ago</span>
                                <span><i class="fas fa-tag"></i> Feature Request</span>
                            </div>
                            <p style="margin: 0; color: var(--text-medium); font-size: 14px; line-height: 1.5;">
                                "Would be great to have a bulk email validation feature that can process 10k+ emails at once. Currently doing them in batches which is time consuming."
                            </p>
                        </div>
                        <div style="display: flex; gap: 8px; flex-shrink: 0;">
                            <button class="btn btn-primary" onclick="viewTicket('1845')">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="btn btn-secondary" onclick="assignTicket('1845')">
                                <i class="fas fa-user-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Resolved Ticket -->
                <div class="card" style="border-left: 4px solid #10b981; opacity: 0.7;">
                    <div style="display: flex; justify-content: space-between; align-items: start; gap: 16px;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                                <span class="badge" style="background: #d1fae5; color: #065f46;">Low</span>
                                <span class="badge badge-success">Resolved</span>
                                <code style="font-size: 12px; color: var(--text-light);">#TICK-1844</code>
                            </div>
                            <h3 style="margin: 0 0 8px 0; font-size: 16px;">
                                <i class="fas fa-check-circle" style="color: #10b981;"></i>
                                How to export contacts to CRM?
                            </h3>
                            <div style="display: flex; align-items: center; gap: 16px; color: var(--text-light); font-size: 13px; margin-bottom: 12px;">
                                <div style="display: flex; align-items: center; gap: 6px;">
                                    <img src="https://ui-avatars.com/api/?name=Emily+Brown&background=fa709a&color=fff&size=24" style="width: 24px; height: 24px; border-radius: 50%;" alt="User">
                                    <strong style="color: var(--text-dark);">Emily Brown</strong>
                                </div>
                                <span><i class="fas fa-envelope"></i> emily@design.co</span>
                                <span><i class="fas fa-clock"></i> 2 days ago</span>
                                <span><i class="fas fa-tag"></i> General Question</span>
                            </div>
                            <p style="margin: 0; color: var(--text-medium); font-size: 14px; line-height: 1.5;">
                                "Need help understanding the export options. What formats are supported for CRM import?"
                            </p>
                            <div style="margin-top: 12px; padding: 12px; background: #d1fae5; border-radius: 8px; font-size: 13px;">
                                <strong style="color: #065f46;">Resolved by Admin:</strong> <span style="color: #047857;">Sent detailed guide with export options. User confirmed issue resolved. ⭐⭐⭐⭐⭐</span>
                            </div>
                        </div>
                        <div style="display: flex; gap: 8px; flex-shrink: 0;">
                            <button class="btn btn-secondary" onclick="viewTicket('1844')">
                                <i class="fas fa-eye"></i> View
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Another Open Ticket -->
                <div class="card" style="border-left: 4px solid #f59e0b;">
                    <div style="display: flex; justify-content: space-between; align-items: start; gap: 16px;">
                        <div style="flex: 1;">
                            <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 8px;">
                                <span class="badge" style="background: #fef3c7; color: #d97706;">High</span>
                                <span class="badge badge-warning">Open</span>
                                <code style="font-size: 12px; color: var(--text-light);">#TICK-1843</code>
                            </div>
                            <h3 style="margin: 0 0 8px 0; font-size: 16px;">
                                <i class="fas fa-credit-card" style="color: #f59e0b;"></i>
                                Crypto payment not reflecting in account
                            </h3>
                            <div style="display: flex; align-items: center; gap: 16px; color: var(--text-light); font-size: 13px; margin-bottom: 12px;">
                                <div style="display: flex; align-items: center; gap: 6px;">
                                    <img src="https://ui-avatars.com/api/?name=David+Lee&background=fccb90&color=333&size=24" style="width: 24px; height: 24px; border-radius: 50%;" alt="User">
                                    <strong style="color: var(--text-dark);">David Lee</strong>
                                </div>
                                <span><i class="fas fa-envelope"></i> david@tech.com</span>
                                <span><i class="fas fa-clock"></i> 3 days ago</span>
                                <span><i class="fas fa-tag"></i> Payment</span>
                            </div>
                            <p style="margin: 0; color: var(--text-medium); font-size: 14px; line-height: 1.5;">
                                "I sent 0.05 BTC for Pro plan upgrade 3 days ago but it's still not showing in my account. Transaction confirmed on blockchain. Tx: 0x7a8f..."
                            </p>
                            <div style="margin-top: 12px; display: flex; gap: 8px;">
                                <a href="crypto-payments.html" class="btn btn-secondary btn-sm">
                                    <i class="fab fa-bitcoin"></i> Review Crypto Payment
                                </a>
                            </div>
                        </div>
                        <div style="display: flex; gap: 8px; flex-shrink: 0;">
                            <button class="btn btn-primary" onclick="viewTicket('1843')">
                                <i class="fas fa-eye"></i> View
                            </button>
                            <button class="btn" style="background: #10b981; color: white;" onclick="resolveTicket('1843')">
                                <i class="fas fa-check"></i> Resolve
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Pagination -->
            <div class="card">
                <div class="pagination">
                    <div class="pagination-info">
                        Showing <strong>1-5</strong> of <strong>20</strong> tickets
                    </div>
                    <div style="display: flex; gap: 8px;">
                        <button class="btn btn-secondary btn-sm" disabled>
                            <i class="fas fa-chevron-left"></i> Previous
                        </button>
                        <button class="btn btn-primary btn-sm">1</button>
                        <button class="btn btn-secondary btn-sm">2</button>
                        <button class="btn btn-secondary btn-sm">3</button>
                        <button class="btn btn-secondary btn-sm">4</button>
                        <button class="btn btn-secondary btn-sm">
                            Next <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- View Ticket Modal -->
    <div id="ticketModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 9999; align-items: center; justify-content: center; overflow-y: auto; padding: 20px;">
        <div style="background: white; border-radius: 16px; max-width: 800px; width: 90%; max-height: 90vh; overflow-y: auto;">
            <!-- Ticket Header -->
            <div style="padding: 30px; border-bottom: 1px solid var(--border-color);">
                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 16px;">
                    <div>
                        <div style="display: flex; align-items: center; gap: 12px; margin-bottom: 12px;">
                            <span class="badge badge-danger">Urgent</span>
                            <span class="badge badge-warning">Open</span>
                            <code style="font-size: 12px;">#TICK-1847</code>
                        </div>
                        <h2 style="margin: 0;">Cannot access my account - payment issues</h2>
                    </div>
                    <button onclick="document.getElementById('ticketModal').style.display='none'" style="background: none; border: none; font-size: 24px; cursor: pointer; color: var(--text-light);">×</button>
                </div>
                <div style="display: flex; align-items: center; gap: 20px; color: var(--text-light); font-size: 14px;">
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <img src="https://ui-avatars.com/api/?name=John+Doe&background=667eea&color=fff&size=32" style="width: 32px; height: 32px; border-radius: 50%;" alt="User">
                        <div>
                            <strong style="color: var(--text-dark); display: block;">John Doe</strong>
                            <span style="font-size: 12px;">john@example.com</span>
                        </div>
                    </div>
                    <span><i class="fas fa-clock"></i> Created 2 hours ago</span>
                    <span><i class="fas fa-tag"></i> Billing</span>
                </div>
            </div>

            <!-- Ticket Conversation -->
            <div style="padding: 30px; background: var(--bg-main);">
                <h4 style="margin: 0 0 16px 0;">Conversation</h4>
                
                <!-- User Message -->
                <div style="margin-bottom: 20px;">
                    <div style="display: flex; gap: 12px;">
                        <img src="https://ui-avatars.com/api/?name=John+Doe&background=667eea&color=fff&size=40" style="width: 40px; height: 40px; border-radius: 50%; flex-shrink: 0;" alt="User">
                        <div style="flex: 1;">
                            <div style="background: white; padding: 16px; border-radius: 12px; box-shadow: var(--shadow-sm);">
                                <strong style="display: block; margin-bottom: 8px;">John Doe <span style="font-weight: normal; color: var(--text-light); font-size: 12px;">• 2 hours ago</span></strong>
                                <p style="margin: 0; line-height: 1.6;">My payment was processed but I still can't access premium features. I've tried logging out and back in but the issue persists. This is urgent as I need to complete a client project today.</p>
                                <p style="margin: 12px 0 0 0; line-height: 1.6;">Transaction ID: TXN-00847<br>Payment Method: Visa ••4242<br>Amount: $49.99</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Admin Response Form -->
                <div style="background: white; padding: 20px; border-radius: 12px; border: 2px solid var(--primary-color);">
                    <h4 style="margin: 0 0 12px 0; color: var(--primary-color);"><i class="fas fa-reply"></i> Reply to Ticket</h4>
                    <textarea class="form-input" rows="5" placeholder="Type your response here..."></textarea>
                    <div style="display: flex; gap: 12px; margin-top: 12px;">
                        <button class="btn btn-primary">
                            <i class="fas fa-paper-plane"></i> Send Reply
                        </button>
                        <button class="btn" style="background: #10b981; color: white;">
                            <i class="fas fa-check"></i> Send & Resolve
                        </button>
                        <button class="btn btn-secondary">
                            <i class="fas fa-paperclip"></i> Attach File
                        </button>
                    </div>
                </div>
            </div>

            <!-- Ticket Actions -->
            <div style="padding: 20px 30px; border-top: 1px solid var(--border-color); display: flex; gap: 12px; flex-wrap: wrap;">
                <button class="btn" style="background: #10b981; color: white;">
                    <i class="fas fa-check"></i> Mark Resolved
                </button>
                <button class="btn btn-secondary">
                    <i class="fas fa-user-plus"></i> Assign to Team Member
                </button>
                <button class="btn btn-secondary">
                    <i class="fas fa-tag"></i> Change Category
                </button>
                <button class="btn btn-secondary">
                    <i class="fas fa-flag"></i> Change Priority
                </button>
                <button class="btn" style="background: #ef4444; color: white; margin-left: auto;">
                    <i class="fas fa-trash"></i> Delete Ticket
                </button>
            </div>
        </div>
    </div>

    <script>
        // Mobile menu toggle
        const mobileMenuBtn = document.getElementById('mobileMenuBtn');
        const sidebar = document.getElementById('sidebar');
        const sidebarOverlay = document.getElementById('sidebarOverlay');

        if (mobileMenuBtn) {
            mobileMenuBtn.addEventListener('click', () => {
                sidebar.classList.toggle('active');
                sidebarOverlay.classList.toggle('active');
            });
        }

        if (sidebarOverlay) {
            sidebarOverlay.addEventListener('click', () => {
                sidebar.classList.remove('active');
                sidebarOverlay.classList.remove('active');
            });
        }

        function viewTicket(id) {
            document.getElementById('ticketModal').style.display = 'flex';
        }

        function resolveTicket(id) {
            if (confirm('Mark ticket #TICK-' + id + ' as resolved?')) {
                alert('Ticket resolved! (Demo)');
            }
        }

        function assignTicket(id) {
            alert('Assign ticket #TICK-' + id + ' to team member (Demo)');
        }

        function addNote(id) {
            alert('Add internal note to ticket #TICK-' + id + ' (Demo)');
        }
    </script>
</body>
</html>

